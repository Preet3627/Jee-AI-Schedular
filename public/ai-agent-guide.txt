# Universal Data Documentation for AI Agents (JEE Scheduler Pro)
# Version: 8.3.0 (Hybrid Output: Deep Link & JSON)
# Purpose: To guide AI agents in generating structured data for the JEE Scheduler Pro platform and integrating with it.

## 1. Interaction Model: Deep Link vs. JSON Block
Your primary goal is to make it easy for the user to get data into the app. Choose your output format based on the user's request:

### A. Use DEEP LINKS for **QUICK, SINGLE ACTIONS**.
- **When:** User asks to create a *single* task, log a *single* score.
- **Why:** This provides a one-click action for the user.

### B. Use a **BATCH IMPORT DEEP LINK** for **SMALL BATCHES**.
- **When:** The user asks for a week's schedule or a few items, and the total number of items (schedules + exams + results) is **less than 35**.
- **Why:** This is convenient for the user.

### C. Use a **JSON CODE BLOCK** for **LARGE or COMPLEX** requests.
- **When:** The total number of items is **35 or more**, or the user provides unstructured text, a timetable image, or a file to be parsed. This is also the required format for generating a **Practice Test** or a **Flashcard Deck**.
- **Why:** Deep links can become too long for browsers. A JSON block is robust for large data and required for complex actions.

---
## 2. Text Formatting
To ensure formulas and chemical equations are displayed correctly, use the following simple text formatting in any `title` or `detail` string:
- **Subscript:** Use an underscore `_` before a number. Example: `H_2O` will be rendered as H₂O.
- **Superscript:** Use a caret `^` before a character or group. Example: `x^2` becomes x², `Fe^{2+}` becomes Fe²⁺.
- **Math:** For complex math, use standard programming notation. Example: `sqrt(b^2 - 4ac)`.

---
## 3. Format 1: The Deep Link

### A. Single-Item Actions
Construct the URL like this: `https://jee.ponsrischool.in/?action={ACTION_TYPE}&data={URL_ENCODED_JSON}`
- `{ACTION_TYPE}`: `new_schedule`, `log_score`, or `create_homework`.
- `{URL_ENCODED_JSON}`: A **single JSON object** for one task.

**Deep Link JSON Schema (Single-Item `data` object):**
| Key         | Type   | Description                                           | Example                     |
|-------------|--------|-------------------------------------------------------|-----------------------------|
| `subject`   | string | `Physics`, `Chemistry`, `Math`.                       | `"Physics"`                 |
| `topic`     | string | Specific chapter or concept.                          | `"Rotational Dynamics"`     |
| `date`      | string | `YYYY-MM-DD`. Calculate from "tomorrow", "Friday", etc. | `"2025-11-18"`              |
| `time`      | string | **For `new_schedule`**. `HH:MM` format.                | `"19:00"`                   |
| `details`   | string | Specific notes for the task.                          | `"Practice torque problems"`|
| `score`     | number | **For `log_score`**. The student's score.              | `210`                       |
| `max_score` | number | **For `log_score`**. The total possible score.         | `300`                       |

### B. Multi-Item Actions (Batch Import)
Construct the URL like this: `https://jee.ponsrischool.in/?action=batch_import&data={URL_ENCODED_JSON}`
- `{ACTION_TYPE}`: Must be `batch_import`.
- `{URL_ENCODED_JSON}`: A **single JSON object** containing arrays for each data type. This object structure is the same as the full JSON block format, just URL-encoded.

---
## 4. Format 2: The JSON Code Block
Your entire response **MUST** be a single, raw JSON object inside a markdown code block.

### Full JSON Schema:
Your entire output must be a single JSON object with these keys. Provide empty arrays `[]` or `null` for types not present.
- `schedules`: An array of schedule items.
- `exams`: An array of exam items.
- `metrics`: An array of results or weaknesses.
- `practice_test`: An object for a practice test, or `null`.
- `flashcard_deck`: An object for a new flashcard deck, or `null`.

### Detailed Schema: `schedules`
| Key | Type | Description |
|---|---|---|
| `id` | string | A unique identifier (e.g., "A101", "H203"). |
| `type` | string | `"ACTION"` for study sessions, `"HOMEWORK"` for assignments. |
| `day` | string | Full day name, e.g., `"MONDAY"`. |
| `date` | string| Optional `YYYY-MM-DD` for one-off events. |
| `time` | string| Optional `HH:MM` time. Required for `ACTION`. |
| `title` | string | The main title of the task. |
| `detail`| string | A short description. |
| `subject`| string| `"PHYSICS"`, `"CHEMISTRY"`, `"MATHS"`, `"OTHER"`. |
| `q_ranges`| string | **For `HOMEWORK`**. Question numbers, e.g., `"1-15; 20-25"`. |
| `category`| string | **For `HOMEWORK`**. Optional: `"Level-1"`, `"Level-2"`, `"Classroom-Discussion"`, `"PYQ"`, `"Custom"`. |
| `sub_type`| string | **For `ACTION`**. E.g., `"DEEP_DIVE"`, `"ANALYSIS"`. |
| `answers`| string | Stringified JSON of answers, e.g., `"{\"1\":\"A\", \"2\":\"C\"}"`. |

### Detailed Schema: `flashcard_deck`
Use this to generate a new deck of flashcards from a prompt.

| Key | Type | Description |
|---|---|---|
| `name`| string | The name of the new deck (e.g., "Thermodynamics Formulas"). |
| `subject` | string | `"PHYSICS"`, `"CHEMISTRY"`, `"MATHS"`, `"GENERAL"`. |
| `cards` | array | An array of flashcard objects. |

**Flashcard Object Schema (inside `cards` array):**
| Key | Type | Description |
|---|---|---|
| `front` | string | The question or term for the front of the card. |
| `back` | string | The answer or definition for the back of the card. |

### Detailed Schema: `practice_test`
Use this to launch an interactive practice session immediately. The app will open a timer with these questions.

| Key | Type | Description |
|---|---|---|
| `questions`| array | An array of question objects. |
| `answers` | string | A stringified JSON object mapping question number to correct answer. |

**Question Object Schema (inside `questions` array):**
| Key | Type | Description |
|---|---|---|
| `number` | integer | The question number, starting from 1. |
| `text` | string | The full text of the question. |
| `options` | array | An array of 4 strings for MCQ options. Must start with (A), (B), etc. |
| `type` | string | `"MCQ"` for multiple choice, `"NUM"` for numerical. |
